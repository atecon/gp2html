# gp2html Gretl Package

The `gp2html` package provides a simple yet powerful way to generate HTML files that embed SVG plots, making it easier to share and view graphical representations of data analysis results. This package is particularly useful for users looking to present their Gretl-generated plots in a web-friendly format.

Please report any issues or suggestions on the Gretl mailing list or GitHub page: https://github.com/atecon/gp2html .

## Installation

To install the `gp2html` package, use the Gretl package manager or the following command:

```hansl
pkg install gp2html
```

## Pre-requisites
You need a working gnuplot installation to generate the SVG files first. In order to add interactivity to the plots on the html-website, you have to:

- Store a plot as a svg file, and

- to add some option to the terminal settings in the `gnuplot` or `plot` command in Gretl.

For example:

```hansl
gnuplot L --with-lines --time-series --output="@filename" \
  { set terminal svg mouse standalone; set grid; set key bottom right;}
```

The magic happens in the `set terminal svg mouse standalone` part. This will add the necessary JavaScript code to the SVG file to make it interactive.


## Potential problems calling gnuplot's JavaScript files

For interactivity, the SVG files generated by gnuplot need to include JavaScript code. This code is stored in separate files, such as `gnuplot_common.js`. The SVG file generated by gnuplot will reference these files.

On **Unix systems** (Linux, macOS), the default path to these files is `/usr/local/share/gnuplot/<GNUPLOT_VERSION>/js/` where `<GNUPLOT_VERSION>` is the version of gnuplot you have installed.

On **Windows**, the default path might be `C:\Program Files\gnuplot\share\gnuplot\<GNUPLOT_VERSION>\js\`.

If you have installed gnuplot in a different location, you may need to adjust the path in the SVG file. This can be done via the `set terminal svg` command:

```hansl
string JSDIR = "/path/to/gnuplot/js/"

gnuplot L --with-lines --time-series --output="@filename" \
  { set terminal svg mouse standalone jsdir "@JSDIR";\
    set grid; set key bottom right;}
```

**Note:** The keyword `standalone` is important to include the JavaScript code in the SVG file.

Alternatively, the JS-files can be loaded from the web. This can be done by setting the `jsdir` to a URL. For example:

```hansl
string JSDIR = "https://gnuplot.sourceforge.net/demo_svg_5.4"   # Specify your version!

gnuplot L --with-lines --time-series --output="@filename" \
  { set terminal svg mouse jsdir "@JSDIR";\
    set grid; set key bottom right;}
```

**Note:** The keyword `standalone` is omitted here.

# Public Functions

The primary function exposed by this package is `gp2html`, which generates an HTML file containing embedded SVG plots.

### Syntax

```gretl
gp2html(filenames, output_file, opts[null])
```

*Parameters:*

- `filenames`: *string array*, The names of the SVG files to embed in the HTML file.
- `output_file`: *string*, The name of the output HTML file. Must have an `.html` extension.
- `opts`: *bundle*, A bundle of options to customize the appearance of the HTML file.


The `opts` bundle can contain the following options:

- `global_title`: *string*, The title of the HTML file. Default is "Overview of plots".
- `margin_bottom`: *scalar*, The bottom margin in pixels. Default is `20`.
- `note`: *string*, Add a note to the HTML file at the top below the title. Per default no note is shown.
- `show_howto`: *bool*, Whether to show the "How to use" section. Default is `TRUE`.
- `single_column`: *bool*, Whether to display the plots in a single columns. Default is `FALSE`.
- `titles`: *string array*, The titles of the plots. If present, the number of titles must match the number of SVG files.


# Change Log

- v0.1 (July 2024): Initial release.
